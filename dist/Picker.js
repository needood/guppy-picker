!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Picker=e()}(this,function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t){t=Math.round(t/N)*N;var e=-(t-Math.floor(q/2)*N)/N;return e}var n,r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=t(function(t,e){!function(n,r){"object"==("undefined"==typeof e?"undefined":i(e))&&"undefined"!=typeof t?t.exports=r():"function"==typeof define&&define.amd?define(r):n.Guppy=r()}(r,function(){function t(t){function n(e){return function(){o.set(e,t[e].apply(o,arguments))}}function r(e){return function(){t[e].apply(o,arguments)}}t=K(this.defaultOptions,t);var i,o=this;if("undefined"!=typeof t){var s={};if(t["default"]){var a=t["default"];"function"==typeof a&&(s=a())}this.set=function(t,e){return s[t]=e,this.trigger("change:"+t,this),s},this.get=function(t){return s[t]},this.mount=function(t){return i=t,this.trigger("mount",i),this},this.getElement=function(){return i};for(var u in t){var c=t[u];if(z.isFunction(c)&&"object"===e(c.__guppy_properties__)&&c.__guppy_properties__.length>0){var l=c.__guppy_properties__[0];"string"==typeof l&&this.on("change:"+l,n(u))}if(z.isFunction(c)&&"object"===e(c.__guppy_observes__)&&c.__guppy_observes__.length>0){var f=c.__guppy_observes__[0];"string"==typeof f&&this.on("change:"+f,r(u))}if(z.isFunction(c)&&"object"===e(c.__guppy_on__)&&c.__guppy_on__.length>0){var p=c.__guppy_on__[0];"string"==typeof p&&this.on(p,r(u))}}return this.trigger("init",this),this}}Function.prototype.$observes=function(){var t=this;return t.__guppy_observes__=arguments,t},Function.prototype.$properties=function(){var t=this;return t.__guppy_properties__=arguments,t},Function.prototype.$on=function(){var t=this;return t.__guppy_on__=arguments,t};for(var e="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":"undefined"==typeof t?"undefined":i(t)},n=Object.prototype,r=Array.isArray,o=n.toString,s=function(t){return function(e){return null==e?void 0:e[t]}},a=Math.pow(2,53)-1,u=s("length"),c={isArrayLike:function(t){var e=u(t);return"number"==typeof e&&e>=0&&e<=a},isArray:r||function(t){return"[object Array]"===o.call(t)},isFunction:function(t){return"function"==typeof t},isObject:function(t){var n="undefined"==typeof t?"undefined":e(t);return"function"===n||"object"===n&&!!t}},l=["Arguments","Function","String","Number","Date","RegExp","Error"],f=0;f<l.length;f++)!function(t){c["is"+t]=function(e){return o.call(e)==="[object "+t+"]"}}(l[f]);c.isArguments(arguments)||(c.isArguments=function(t){return t.hasOwnProperty("callee")});var p=c,d=p,h=/\s+/,v=Object.keys,m={create:function(t){var e=document.createElement("div");return e.innerHTML=t,e.removeChild(e.children[0])},addClass:function(t,e){return S(t,function(t){if(""===t.className)t.className=e;else{var n=t.className,r=[];S(e.split(h),function(t){new RegExp("\\b("+t+")\\b").test(n)||r.push(" "+t)}),t.className+=r.join("")}return t})},setClass:function(t,e){return S(t,function(t){return t.className=e,t})},hasClass:function(t,e){return new RegExp("\\b("+e.split(h).join("|")+")\\b").test(t.className)},removeClass:function(t,e){return S(t,function(t){return t.className=e?O.trim(t.className.replace(new RegExp("\\b("+e.split(h).join("|")+")\\b","g"),"").split(h).join(" ")):"",t})}},y={before:function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},once:function(t){return y.before.call(this,2,t)}},g=function(t){return null==t||(d.isArrayLike(t)&&(d.isArray(t)||d.isString(t)||d.isArguments(t))?0===t.length:0===E(t).length)},b=0,x=function(t){var e=++b+"";return t?t+e:e},k=function(t,e){return null!=t&&hasOwnProperty.call(t,e)},w=function(t){if(window._)return _.allKey;if(!d.isObject(t))return[];var e=[];for(var n in t)e.push(n);return e},E=function(t){return window._?_.keys:d.isObject(t)?v?v(t):void 0:[]},T=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),a=s.length,u=0;u<a;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},j=T(w),S=function(t,e){if(null!==t){if(void 0===e)return t;if(!d.isArray(t))return e(t);for(var n=0;n<t.length;n++)e(t[n])}},O={camelCase:function(t){return t.replace("-ms-","ms-").replace(rcamelCase,function(t,e){return(e+"").toUpperCase()})},replace:function(t,e){for(var n in e)t=t.replace(new RegExp(n,"ig"),e[n]);return t},slashes:function(t){return $string.replace(t,{"\\\\":"\\\\","\b":"\\b","\t":"\\t","\n":"\\n","\r":"\\r",'"':'\\"'})},trim:"".trim?function(t){return t.trim()}:function(t){return(t+"").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}},A={stringOpt:O,uniqueId:x,has:k,allKeys:w,extend:j,keys:E,funcOpt:y,isEmpty:g,mapcall:S,domOpt:m},L=A.funcOpt,C=A.isEmpty,M=A.keys,N=A.uniqueId,q=Array.prototype.slice,F={on:function(t,e,n){if(!R(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function B(t,e,n){if(!R(this,"once",t,[e,n])||!e)return this;var r=this,B=L.once(function(){r.off(t,B),e.apply(this,arguments)});return B._callback=e,this.on(t,B,n)},off:function(t,e,n){var r,i,o,s,a,u,c,l;if(!this._events||!R(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(s=t?[t]:M(this._events),a=0,u=s.length;a<u;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=r=[],e||n)for(c=0,l=o.length;c<l;c++)i=o[c],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=q.call(arguments,1);if(!R(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&D(n,e),r&&D(r,arguments),this},stopListening:function(t,n,r){var i=this._listeningTo;if(!i)return this;var o=!n&&!r;r||"object"!==("undefined"==typeof n?"undefined":e(n))||(r=this),t&&((i={})[t._listenId]=t);for(var s in i)t=i[s],t.off(n,r,this),(o||C(t._events))&&delete this._listeningTo[s];return this}},P=/\s+/,R=function(t,n,r,i){if(!r)return!0;if("object"===("undefined"==typeof r?"undefined":e(r))){for(var o in r)t[n].apply(t,[o,r[o]].concat(i));return!1}if(P.test(r)){for(var s=r.split(P),a=0,u=s.length;a<u;a++)t[n].apply(t,[s[a]].concat(i));return!1}return!0},D=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},$={listenTo:"on",listenToOnce:"once"};for(var I in $)!function(t,n){F[n]=function(n,r,i){var o=this._listeningTo||(this._listeningTo={}),s=n._listenId||(n._listenId=N("l"));return o[s]=n,i||"object"!==("undefined"==typeof r?"undefined":e(r))||(i=this),n[t](r,i,this),this}}($[I],I);F.bind=F.on,F.unbind=F.off;var H=F,z=p,Z=A,K=Z.extend,W=Z.has,X=function(t,e){var n,r=this;n=t&&W(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},K(n,r,e);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,t&&K(n.prototype,t),n.__super__=r.prototype,n};t.defaultOptions={},t.extend=X,t.utils=Z,t.isType=z;var Y=H;K(t.prototype,Y);var G=t,U=G,V=U;return V})}),s=!1,a="ontouchstart"in window,u=function(t,e){var n=function(t){e.drag&&e.drag(a?t.changedTouches[0]||t.touches[0]:t)},r=function i(t){a||(document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i)),document.onselectstart=null,document.ondragstart=null,s=!1,e.end&&e.end(a?t.changedTouches[0]||t.touches[0]:t)};t.addEventListener(a?"touchstart":"mousedown",function(t){s||(document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},a||(document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)),s=!0,e.start&&(t.preventDefault(),e.start(a?t.changedTouches[0]||t.touches[0]:t)))}),a&&(t.addEventListener("touchmove",n),t.addEventListener("touchend",r),t.addEventListener("touchcancel",r))},c=document.documentElement.style,l=!1;window.opera&&"[object Opera]"===Object.prototype.toString.call(opera)?n="presto":"MozAppearance"in c?n="gecko":"WebkitAppearance"in c?n="webkit":"string"==typeof navigator.cpuClass&&(n="trident");var f={trident:"-ms-",gecko:"-moz-",webkit:"-webkit-",presto:"-o-"}[n],p={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[n],d=document.createElement("div"),h=p+"Perspective",v=p+"Transform",m=f+"transform",y=p+"Transition",g=f+"transition",b=p.toLowerCase()+"TransitionEnd";void 0!==d.style[h]&&(l=!0);var x=function(t){var e={left:0,top:0};if(null===t||null===t.style)return e;var n=t.style[v],r=/translate\(\s*(-?\d+(\.?\d+?)?)px,\s*(-?\d+(\.\d+)?)px\)\s*translateZ\(0px\)/g.exec(n);return r&&(e.left=+r[1],e.top=+r[3]),e},k=function(t,e,n){if((null!==e||null!==n)&&null!==t&&null!==t.style&&(t.style[v]||0!==e||0!==n)){if(null===e||null===n){var r=x(t);null===e&&(e=r.left),null===n&&(n=r.top)}w(t),l?t.style[v]+=" translate("+(e?e+"px":"0px")+","+(n?n+"px":"0px")+") translateZ(0px)":t.style[v]+=" translate("+(e?e+"px":"0px")+","+(n?n+"px":"0px")+")"}},w=function(t){if(null!==t&&null!==t.style){var e=t.style[v];e&&(e=e.replace(/translate\(\s*(-?\d+(\.?\d+?)?)px,\s*(-?\d+(\.\d+)?)px\)\s*translateZ\(0px\)/g,""),t.style[v]=e)}},E={transformProperty:v,transformStyleName:m,transitionProperty:y,transitionStyleName:g,transitionEndProperty:b,getElementTranslate:x,translateElement:k,cancelTranslateElement:w},T={1:function(t,e,n,r,i){return'        <div class="picker-item">'+t.escapeExpression(t.lambda(e,e))+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,r,i){var o;return'<div class="picker-slot-wrapper">\n'+(null!=(o=n.each.call(null!=e?e:{},null!=e?e.items:e,{name:"each",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i}))?o:"")+"</div>\n"},useData:!0},j={compiler:[7,">= 4.0.0"],main:function(t,e,n,r,i){return'<div class="picker">\n<div class="picker-items">\n    <div class="picker-center-highlight"></div>\n</div>\n</div>\n'},useData:!0},S=o,O=S.utils.domOpt,A=u,L=E,C=handlebarsRuntime.template(T),M=handlebarsRuntime.template(j),N=36,q=5,F=(q-1)/2*N,P=S.extend({defaultOptions:{mount:function(t){var n=this;t.innerHTML=M();for(var r=t.querySelector(".picker-items"),i=0,o=this.get("slots");i<o.length;i++){var s=o[i],a=document.createElement("div");a.className="picker-slot",a.innerHTML=C({items:this.get(s)}),r.appendChild(a),function(t,r,i){function o(){var t=n.get(i),e=F-t*N;a.style.height=q*N+"px",L.translateElement(a,null,e);var r=a.querySelectorAll(".picker-item");if(0!==r.length){var o=a.querySelector(".picker-selected");o&&O.removeClass(o,"picker-selected"),O.addClass(r[t],"picker-selected")}}function s(){A(a,{start:function(t){l={start:new Date,startLeft:t.pageX,startTop:t.pageY,startTranslateTop:L.getElementTranslate(a).top},O.addClass(a,"dragging")},drag:function(t){l.left=t.pageX,l.top=t.pageY;var e=l.top-l.startTop,n=l.startTranslateTop+e;L.translateElement(a,null,n),u=n-c||n,c=n},end:function(){O.removeClass(a,"dragging");var t,r=7,o=L.getElementTranslate(a).top,s=new Date-l.start;s<300&&(t=o+u*r);var c;c=t?Math.round(t/N)*N:Math.round(o/N)*N;var f=a.querySelectorAll(".picker-item");c=Math.max((f.length-1)*-1*N+F,Math.min(c,F));var p=e(c);n.set(i,p),l={}}})}n.on("change:"+r,function(){t.className="picker-slot",t.innerHTML=C({items:n.get(r)}),a=t.querySelector(".picker-slot-wrapper"),s()});var a=t.querySelector(".picker-slot-wrapper");o(),n.on("change:"+i,o),L.translateElement(a,null,F);var u,c,l={};s()}(a,s,s+"Value")}}.$on("mount")}}),R=P;return R});
